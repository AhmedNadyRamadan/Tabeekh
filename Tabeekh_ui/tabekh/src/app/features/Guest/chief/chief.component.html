<section class="container-fluid bg-white">
  <div class="info-card">
    <div class="info-img">
      <img
        src="{{
          'data:image/*;base64, ' + (chief | async)!.photo || dummyImage
        }}"
        alt="{{ (chief | async)?.name }}"
      />
    </div>
    <div class="info-body">
      <h2>{{ (chief | async)?.name }}</h2>
      <div
        class="d-flex justify-content-between text-warning"
        [innerHTML]="(chief | async)?.totalRate || 0 | rate"
      ></div>
    </div>
  </div>
  <div class="tabs-indexer">
    <button [class]="isActiveTab0" (click)="toggleTabs(0)">كل الوجبات</button>
    <button [class]="isActiveTab1" (click)="toggleTabs(1)">اليوم</button>
    <button [class]="isActiveTab2" (click)="toggleTabs(2)">الغد</button>
    <button [class]="isActiveTab3" (click)="toggleTabs(3)">التقييمات</button>
  </div>
  <div class="tabs-body mt-4">
    @if (isActiveTab0 || isActiveTab1 || isActiveTab2) {
    <div class="container-fluid mb-3">
      <div class="row justify-content-center gap-5 flex-wrap">
        @for (meal of displayedMeals() | async; track $index) {
        <div class="d-flex justify-content-center col-auto">
          <app-meal-card [meal]="meal" [viewChiefName]="false"></app-meal-card>
        </div>
        }@empty {
        <h3 class="text-center">لا يوجد بيانات</h3>
        }
      </div>
    </div>
    @if ((displayedMeals() | async)!.length > rows) {
    <div class="row justify-content-center">
      <div class="col-auto">
        <p-paginator
          (onPageChange)="onPageChange($event)"
          styleClass="paginator"
          [first]="first"
          [rows]="rows"
          [totalRecords]="120"
          [rowsPerPageOptions]="[10, 20, 30]"
        />
      </div>
    </div>
    } }@else if (isActiveTab3) {
    <app-reviews
      [reviews]="(reviews | async)!"
      reviewFor="chief"
      [chief_id]="(chief | async)?.id"
    ></app-reviews>
    }
  </div>
</section>
